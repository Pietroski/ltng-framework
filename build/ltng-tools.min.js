const ltng_tools_exports = {};
{
{
{
var lowerCamelCaseToLowerCaseLowerKebabCase = window.lowerCamelCaseToLowerCaseLowerKebabCase;
const objStrDasher = (obj) =>
Object.entries(obj || {}).reduce(
(previousValue, [key, value]) => ({
...previousValue,
[lowerCamelCaseToLowerCaseLowerKebabCase(key)]: value,
}), {},
)
window.objStrDasher = ltng_tools_exports.objStrDasher = objStrDasher;
}
{
const lowerCamelCaseToLowerCaseLowerKebabCase = (camel) =>
camel.replace(/[A-Z]/g, (m) => '-' + m.toLowerCase())
const kebabToLowerSnakeCase = (kebab) =>
kebab.replaceAll('-', '_').toLowerCase()
const lowerCamelCaseToLowerCaseLowerSnakeCase = (camel) =>
camel.replace(/[A-Z]/g, (m) => '_' + m.toLowerCase())
window.lowerCamelCaseToLowerCaseLowerKebabCase = ltng_tools_exports.lowerCamelCaseToLowerCaseLowerKebabCase = lowerCamelCaseToLowerCaseLowerKebabCase;
window.kebabToLowerSnakeCase = ltng_tools_exports.kebabToLowerSnakeCase = kebabToLowerSnakeCase;
window.lowerCamelCaseToLowerCaseLowerSnakeCase = ltng_tools_exports.lowerCamelCaseToLowerCaseLowerSnakeCase = lowerCamelCaseToLowerCaseLowerSnakeCase;
}
{
const styleToString = (styleObj) => Object.entries(styleObj || {}).map(([key, value]) => {
const kebabKey = key.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, '$1-$2').toLowerCase()
return `${kebabKey}: ${value}`
}).join('; ')
const toStyles = (obj) =>
Object.entries(obj || {}).reduce(
(previousValue, [key, value]) => ({
...previousValue,
[key.startsWith('moz') || key.startsWith('webkit') ? `-${key}` : key]: value,
}),
{},
)
window.toStyles = ltng_tools_exports.toStyles = toStyles;
window.styleToString = ltng_tools_exports.styleToString = styleToString;
}
}
{
var kebabToLowerSnakeCase = window.kebabToLowerSnakeCase;
function MakeDictionaries(dictionaries, defaultLocale) {
let state = {
localLocale: defaultLocale,
internalDictionaries: dictionaries,
dictionary: dictionaries[defaultLocale],
}
return {
getLocale: () => state.localLocale,
setLocale: (locale) => {
let newLocale = kebabToLowerSnakeCase(locale || '')
if (!locale) {
newLocale = 'en'
}
state.localLocale = newLocale
state.dictionary = state.internalDictionaries[newLocale]
},
t: () => state.dictionary,
tFrom: (locale) => state.internalDictionaries[locale],
text: () => state.dictionary,
textFrom: (locale) => state.internalDictionaries[locale],
}
}
var __ltng_default_export = {
MakeDictionaries
}
Object.assign(ltng_tools_exports, __ltng_default_export);
Object.assign(window, __ltng_default_export);
}
{
{
function randomIntFromInterval(min, max) { // min and max included
return Math.floor(Math.random() * (max - min + 1) + min)
}
window.randomIntFromInterval = ltng_tools_exports.randomIntFromInterval = randomIntFromInterval;
}
{
var randomIntFromInterval = window.randomIntFromInterval;
function randomStr(length) {
let result = ''
const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'
const charactersLength = characters.length
let counter = 0
while (counter < length) {
result += characters.charAt(Math.floor(Math.random() * charactersLength))
counter += 1
}
return result
}
function generatePass() {
let pass = ''
let str = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' +
'abcdefghijklmnopqrstuvwxyz0123456789@#$'
for (let i = 1; i <= 8; i++) {
let char = Math.floor(Math.random()
* str.length + 1)
pass += str.charAt(char)
}
return pass
}
function randomStrWithPrefixWithSep(length, prefix, separator) {
return `${prefix}${separator}${randomStr(length)}`
}
function randomEmail() {
const prefix = randomStr(randomIntFromInterval(5, 22))
const domain = `${randomStr(randomIntFromInterval(5, 7))}.${randomStr(randomIntFromInterval(2, 3))}`
return `${prefix}@${domain}`
}
window.randomStr = ltng_tools_exports.randomStr = randomStr;
window.generatePass = ltng_tools_exports.generatePass = generatePass;
window.randomStrWithPrefixWithSep = ltng_tools_exports.randomStrWithPrefixWithSep = randomStrWithPrefixWithSep;
window.randomEmail = ltng_tools_exports.randomEmail = randomEmail;
}
}
{
{
function ExternalServiceCallErr() {
return {
cause: 'external service call',
message: 'request response',
name: 'external error',
}
}
function MapHttpResponseInfo(response) {
if (!response) {
return {
Err: {
cause: 'unknown',
message: 'invalid HttpResponseInfo<any> response ${response}',
name: 'invalid internal response',
},
Data: null,
StatusCode: 422,
}
}
return {
StatusCode: response.StatusCode || 0,
Data: response.Data || null,
Err: response.Err || null,
}
}
window.ExternalServiceCallErr = ltng_tools_exports.ExternalServiceCallErr = ExternalServiceCallErr;
window.MapHttpResponseInfo = ltng_tools_exports.MapHttpResponseInfo = MapHttpResponseInfo;
}
{
var ExternalServiceCallErr = window.ExternalServiceCallErr;
const defaultHeaders = {
Accept: 'application/json',
'Content-type': 'application/json; charset=UTF-8',
}
async function asyncDataParser(data) {
return !!data.body
? {
StatusCode: data.status,
Data: await data.json(),
Err: data.status >= 400 ? ExternalServiceCallErr() : null,
}
: {
StatusCode: data.status,
Data: null,
Err: data.status >= 400 ? ExternalServiceCallErr() : null,
}
}
function caughtHttpLocalResponseTreatmentError(err) {
return {
Err: err,
StatusCode: 422, // Unprocessable Content,
Data: null,
}
}
function generateInit(method, body, headers) {
const init = {
method: method,
headers: {
...defaultHeaders,
...headers,
},
}
if (body !== null && body !== undefined) {
init.body = JSON.stringify(body)
}
return init
}
async function AnyServerRequest(method, baseURL, url, body, headers) {
const init = generateInit(method, body, headers)
return fetch(baseURL + url, init)
.then(async (data) => {
return asyncDataParser(data)
})
.catch((error) => {
console.log(`caught ${method} call error: ${error}`)
return caughtHttpLocalResponseTreatmentError(error)
})
}
function HttpClient(config) {
const baseURL = config.baseURL
return {
Get: async function (url, headers) {
return AnyServerRequest('GET', baseURL, url, null, headers)
},
Post: async function (url, body, headers) {
return AnyServerRequest('POST', baseURL, url, body, headers)
},
Delete: async function (url, headers) {
return AnyServerRequest('DELETE', baseURL, url, null, headers)
},
Put: async function (url, body, headers) {
return AnyServerRequest('PUT', baseURL, url, body, headers)
},
Patch: async function (url, body, headers) {
return AnyServerRequest('PATCH', baseURL, url, body, headers)
},
Any: async function (method, url, body, headers) {
return AnyServerRequest(method, baseURL, url, body, headers)
},
}
}
window.HttpClient = ltng_tools_exports.HttpClient = HttpClient;
window.asyncDataParser = ltng_tools_exports.asyncDataParser = asyncDataParser;
window.defaultHeaders = ltng_tools_exports.defaultHeaders = defaultHeaders;
window.AnyServerRequest = ltng_tools_exports.AnyServerRequest = AnyServerRequest;
}
}
}
const ltng_tools = ltng_tools_exports;
Object.assign(window, ltng_tools)
export {
ltng_tools
}