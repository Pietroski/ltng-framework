var q=(o,t)=>()=>(t||o((t={exports:{}}).exports,t),t.exports);var J=q((Gt,ot)=>{var Et=require("fs"),X=require("path");function bt(o,t,r={}){if(r[t]){let s=r[t];return X.isAbsolute(s)?s:X.resolve(o,s)}return X.resolve(o,t)}function Rt(o,t="",r={}){let s=o,S=/import\s+\{([\s\S]*?)\}\s+from\s+['"](.*?)['"]/g;if(s=s.replace(S,(n,c,a)=>c.split(",").map(m=>{if(m=m.trim(),!m)return"";if(m.includes(" as ")){let[y,W]=m.split(" as ").map(T=>T.trim());return`var ${W} = window.${y};`}else return`var ${m} = window.${m};`}).filter(Boolean).join(`
`)),s=s.replace(/import\s+['"].*?['"]/g,""),s=s.replace(/import\s+.*?from\s+['"].*?['"]/g,""),s=s.replace(/export\s+const\s+(\w+)/g,"window.$1"),s=s.replace(/export\s+var\s+(\w+)/g,"window.$1"),s=s.replace(/export\s+let\s+(\w+)/g,"window.$1"),s=s.replace(/export\s+function\s+(\w+)/g,"window.$1 = function $1"),s=s.replace(/export\s+class\s+(\w+)/g,"window.$1 = class $1"),/export\s+default\s+\{/.test(s)&&(s=s.replace(/export\s+default\s+\{/,"var __ltng_default_export = {"),s+=`
Object.assign(window, __ltng_default_export);`),s=s.replace(/export\s+default\s+(\w+)/g,"window.default = $1"),s=s.replace(/export\s+\{([\s\S]*?)\}/g,(n,c)=>c.split(",").map(a=>{if(a=a.trim(),!a)return"";if(a.includes(" as ")){let[d,m]=a.split(" as ").map(y=>y.trim());return`window.${m} = ${d};`}else return`window.${a} = ${a};`}).join(`
`)),s=s.replace(/export\s+\*\s+from\s+['"].*?['"]/g,""),r.stripLoadCSS&&(s=s.replace(/window\.loadCSS\(new URL\(.*?, import\.meta\.url\)\.href\)/g,"")),t&&t!=="inline"){let n="file://"+(t.startsWith("/")?"":"/")+t;s=s.replace(/import\.meta/g,`({ url: '${n}' })`)}else s=s.replace(/import\.meta/g,"({ url: 'file:///unknown' })");return s}function vt(o){return o.replace(/\/\*[\s\S]*?\*\//g,"").replace(/^\s*\/\/.*$/gm,"").split(`
`).map(t=>t.trim()).filter(t=>t.length>0).join(`
`)}ot.exports={resolvePath:bt,transpile:Rt,minify:vt}});var Y=q((_t,ct)=>{var P=require("fs"),k=require("path"),{transpile:Ut}=J();function jt(o,t,r){let{srcDir:s,rootDir:S}=r,n=o.url==="/"?"/index.html":o.url,c=k.join(s,n);if(!P.existsSync(c)){let a=k.join(S,n);if(P.existsSync(a))c=a;else{let d=S;for(let m=0;m<3;m++){d=k.join(d,"..");let y=k.join(d,n);if(P.existsSync(y)){c=y;break}}}}if(P.existsSync(c)){let a=k.extname(c),d=P.readFileSync(c);a===".js"||a===".mjs"?t.writeHead(200,{"Content-Type":"text/javascript"}):a===".html"?t.writeHead(200,{"Content-Type":"text/html"}):a===".css"?t.writeHead(200,{"Content-Type":"text/css"}):t.writeHead(200,{"Content-Type":"text/plain"}),t.end(d)}else t.writeHead(404),t.end("Not found")}ct.exports=jt});var at=q((Bt,lt)=>{var M=class{constructor(){this.childNodes=[]}appendChild(t){if(t)return this.childNodes.push(t),t.parentNode=this,t}remove(){if(this.parentNode){let t=this.parentNode.childNodes.indexOf(this);t>-1&&this.parentNode.childNodes.splice(t,1)}}},E=class extends M{constructor(t){super(),this.textContent=t}toString(){return this.textContent}},C=class extends M{constructor(t){super(),this.tagName=t.toLowerCase(),this.attributes={},this.style={},this.classList={add:(...r)=>{let s=(this.attributes.class||"").split(" ").filter(Boolean);this.attributes.class=[...new Set([...s,...r])].join(" ")}}}setAttribute(t,r){this.attributes[t]=String(r)}getAttribute(t){return this.attributes[t]}addEventListener(){}closest(){return null}toString(){let t=Object.entries(this.attributes).map(([n,c])=>` ${n}="${c}"`).join(""),r=Object.entries(this.style).map(([n,c])=>`${n.replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}:${c}`).join(";"),s=r?` style="${r}"`:"";if(["img","input","br","hr","meta","link"].includes(this.tagName))return`<${this.tagName}${t}${s} />`;let S=this.childNodes.map(n=>n.toString()).join("");return`<${this.tagName}${t}${s}>${S}</${this.tagName}>`}},G=class extends C{constructor(){super("body")}},tt=class extends C{constructor(){super("head")}},z=class extends C{constructor(){super("link")}set href(t){this.setAttribute("href",t)}get href(){return this.getAttribute("href")}set rel(t){this.setAttribute("rel",t)}get rel(){return this.getAttribute("rel")}},V=class extends C{constructor(t){super(t)}},et=class{constructor(){this.head=new tt,this.body=new G}createElement(t){return t.toLowerCase()==="body"?this.body:t.toLowerCase()==="link"?new z:new C(t)}createTextNode(t){return new E(t)}querySelector(t){if(t.startsWith("link[href=")){let r=t.match(/href=["'](.*?)["']/)[1];return this.head.childNodes.find(s=>s.tagName==="link"&&s.attributes.href===r)||null}return null}getElementById(t){let r=n=>{if(n.attributes&&n.attributes.id===t)return n;if(n.childNodes)for(let c of n.childNodes){let a=r(c);if(a)return a}return null},s=r(this.body);return s||r(this.head)}},st=class{constructor(){this.document=new et,this.console=console,this.HTMLElement=C,this.HTMLBodyElement=G,this.HTMLUnknownElement=V,this.Node=M,this.TextNode=E,this.localStorage={getItem:()=>null,setItem:()=>{},removeItem:()=>{},clear:()=>{}},this.crypto={getRandomValues:t=>{for(let r=0;r<t.length;r++)t[r]=Math.floor(Math.random()*256);return t}}}};function Wt(){return new st}lt.exports={createWindow:Wt,HTMLElement:C,HTMLBodyElement:G,HTMLUnknownElement:V,Node:M,TextNode:E,HTMLLinkElement:z}});var nt=q((Jt,ut)=>{var H=require("fs"),D=require("path"),U=require("vm"),{transpile:dt,resolvePath:rt}=J(),Ct=at();function ht(o,t){let r=H.readFileSync(o,"utf8"),s=Ct.createWindow(),S=s.document,n=s;n.window=n,n.global=n,n.console=console,n.setTimeout=setTimeout,n.clearTimeout=clearTimeout,n.URL=URL,U.createContext(n);let c=/<script\b[^>]*>([\s\S]*?)<\/script>/gmi,a=/src=["'](.*?)["']/,d=/type=["'](.*?)["']/,m={},y=/<script\b[^>]*type=["']importmap["'][^>]*>([\s\S]*?)<\/script>/gmi,W;for(;(W=y.exec(r))!==null;)try{let p=JSON.parse(W[1]);p.imports&&(m={...m,...p.imports})}catch(p){console.error("Failed to parse import map",p)}let T=new Set;function j(p){if(T.has(p))return;if(console.log(`Loading module: ${p}`),T.add(p),!H.existsSync(p)){console.error(`Module not found: ${p}`);return}let R=H.readFileSync(p,"utf8"),e=/(?:import|export)\s+(?:[\s\S]*?)\s+from\s+['"](.*?)['"]|import\s+['"](.*?)['"]/g,i;for(;(i=e.exec(R))!==null;){let u=i[1]||i[2];if(u){let g=rt(D.dirname(p),u,m);j(g)}}let f=`(function(){
${dt(R,p)}
})();`;try{U.runInContext(f,n)}catch(u){console.error(`Error running module ${p}:`,u)}}let x;for(;(x=c.exec(r))!==null;){let p=x[0],R=d.exec(p),e=R?R[1]:"";if(e==="importmap")continue;let i=a.exec(p),h=x[1];if(i){let f=i[1],u=rt(D.dirname(o),f,m);if(e==="module")j(u);else if(H.existsSync(u)){let g=H.readFileSync(u,"utf8");try{U.runInContext(g,n)}catch($){console.error(`Error running script ${u}:`,$)}}}else if(h.trim())if(e==="module"){let f=/(?:import|export)\s+(?:[\s\S]*?)\s+from\s+['"](.*?)['"]|import\s+['"](.*?)['"]/g,u;for(;(u=f.exec(h))!==null;){let I=u[1]||u[2];if(I){let v=rt(D.dirname(o),I,m);j(v)}}let $=`(function(){
${dt(h,"inline")}
})();`;try{U.runInContext($,n)}catch(I){console.error("Error running inline module:",I)}}else try{U.runInContext(h,n)}catch(f){console.error("Error running inline script:",f)}}let B=/(<body\b[^>]*>)([\s\S]*?)(<\/body>)/i,w=B.exec(r),F="";if(w){let p=w.index,R=p+w[0].length,e,i=/<script\b[^>]*>([\s\S]*?)<\/script>/gmi;for(;(e=i.exec(r))!==null;)e.index>=p&&e.index<R&&(F+=e[0]+`
`)}if(w){let p=w[1],R=w[3],e=S.body.childNodes.map(h=>h.toString()).join(""),i=`${p}${e}${F}${R}`;r=r.replace(B,()=>i)}let O=/(<head\b[^>]*>)([\s\S]*?)(<\/head>)/i,A=O.exec(r);if(A){let p=A[1],R=A[2],e=A[3],i=S.head.childNodes.map(f=>f.toString()).join(""),h=`${p}${R}${i}${e}`;r=r.replace(O,()=>h)}return r}function Nt(o,t,r){let{srcDir:s,rootDir:S}=r,n=o.url==="/"?"/index.html":o.url;if(n.endsWith(".html")||n==="/"){let c=D.join(s,n==="/"?"index.html":n);if(H.existsSync(c)||(c=D.join(S,n)),H.existsSync(c))try{let a=ht(c,S),d=/["'](file:\/\/.*?)["']/g;a=a.replace(d,(m,y)=>{try{let W=new URL(y),T=D.normalize(W.pathname),j=D.relative(S,T);return`"${j.startsWith("/")||j.startsWith("..")?j:"/"+j}"`}catch{return m}}),t.writeHead(200,{"Content-Type":"text/html"}),t.end(a)}catch(a){console.error(a),t.writeHead(500),t.end("SSR Error")}else t.writeHead(404),t.end("Not found")}else Y()(o,t,r)}ut.exports={handleSSR:Nt,renderFile:ht}});var ft=q((zt,pt)=>{var b=require("fs"),l=require("path"),{renderFile:Tt}=nt(),{resolvePath:_}=J();function At(o){let{srcDir:t,distDir:r,rootDir:s}=o;console.log(`Building SSG from ${t} to ${r}...`),b.existsSync(r)||b.mkdirSync(r,{recursive:!0}),b.readdirSync(t).filter(n=>n.endsWith(".html")).forEach(n=>{console.log(`Rendering ${n}...`);let c=l.join(t,n);try{let A=function(e){if(!b.existsSync(e))return;let i=b.readFileSync(e,"utf8"),h=/(?:import|export)\s+(?:[\s\S]*?)\s+from\s+['"](.*?)['"]|import\s+['"](.*?)['"]/g,f;for(;(f=h.exec(i))!==null;){let g=f[1]||f[2];if(g&&!g.startsWith("http")){let $=_(l.dirname(e),g);console.log(`Scanned dependency: ${g} -> ${$}`),x.has($)||(x.add($),A($))}}let u=/new\s+URL\s*\(\s*['"](.*?)['"]\s*,\s*import\.meta\.url\s*\)/g;for(;(f=u.exec(i))!==null;){let g=f[1];if(g&&!g.startsWith("http")){let $=_(l.dirname(e),g);console.log(`Scanned asset: ${g} -> ${$}`),x.has($)||x.add($)}}};var a=A;let d=Tt(c,s);console.log(`[SSG] Initial HTML length: ${d.length}`);let m=/["'](file:\/\/.*?)["']/g;d=d.replace(m,(e,i)=>{try{let f=new URL(i).pathname,u,g=l.relative(t,f);if(!g.startsWith("..")&&!l.isAbsolute(g))u=l.join(r,g);else{let Q=l.relative(s,f);u=l.join(r,Q)}let I=l.dirname(l.join(r,n)),v=l.relative(I,u);return v.startsWith(".")||(v="./"+v),`"${v}"`}catch{return e}}),console.log(`[SSG] HTML length after file:// URL rewrite: ${d.length}`);let y=(e,i,h)=>{if(!e||e.startsWith("http")||e.startsWith("data:")||e.startsWith("/")||e.startsWith("#"))return e;try{let f=_(l.dirname(l.join(t,i)),e),u,g=l.relative(t,f);if(!g.startsWith("..")&&!l.isAbsolute(g))u=l.join(h,g);else{let Q=l.relative(s,f);u=l.join(h,Q)}let I=l.dirname(l.join(h,i)),v=l.relative(I,u);return v.startsWith(".")||(v="./"+v),v}catch{return e}},W=/src=["'](.*?)["']/g;d=d.replace(W,(e,i)=>i.startsWith("http")||i.startsWith("//")||i.startsWith("data:")?e:`src="${y(i,n,r)}"`),console.log(`[SSG] HTML length after src rewrite: ${d.length}`);let T=/href=["'](.*?)["']/g;d=d.replace(T,(e,i)=>i.startsWith("http")||i.startsWith("//")||i.startsWith("#")||i.startsWith("data:")?e:`href="${y(i,n,r)}"`),console.log(`[SSG] HTML length after href rewrite: ${d.length}`);let j=/<script\b[^>]*type=["']importmap["'][^>]*>([\s\S]*?)<\/script>/gmi;d=d.replace(j,(e,i)=>{try{let h=JSON.parse(i);return h.imports&&Object.keys(h.imports).forEach(f=>{let u=h.imports[f];!u.startsWith("http")&&!u.startsWith("//")&&(h.imports[f]=y(u,n,r))}),`<script type="importmap">
${JSON.stringify(h,null,2)}
</script>`}catch{return e}}),console.log(`[SSG] HTML length after importmap rewrite: ${d.length}`),b.writeFileSync(l.join(r,n),d);let x=new Set,B=/<(?:script|link)\b[^>]*?(?:src|href)=["'](.*?)["'][^>]*>/gmi,w;for(;(w=B.exec(d))!==null;){let e=w[1];e&&!e.startsWith("http")&&x.add(e)}let F=/<script\b[^>]*type=["']importmap["'][^>]*>([\s\S]*?)<\/script>/gmi,O=b.readFileSync(c,"utf8");for(;(w=F.exec(O))!==null;)try{let e=JSON.parse(w[1]);e.imports&&Object.values(e.imports).forEach(i=>{i.startsWith("http")||x.add(i)})}catch{}x.clear();let p=/<(?:script|link)\b[^>]*?(?:src|href)=["'](.*?)["'][^>]*>/gmi;for(;(w=p.exec(O))!==null;){let e=w[1];if(e&&!e.startsWith("http")){let i=_(l.dirname(c),e);x.add(i)}}for(;(w=F.exec(O))!==null;)try{let e=JSON.parse(w[1]);e.imports&&Object.values(e.imports).forEach(i=>{if(!i.startsWith("http")){let h=_(l.dirname(c),i);x.add(h)}})}catch{}let R=Array.from(x);x.clear();for(let e of R)b.existsSync(e)&&(x.add(e),(e.endsWith(".js")||e.endsWith(".mjs"))&&A(e));for(let e of x)try{let i,h=l.relative(t,e);if(!h.startsWith("..")&&!l.isAbsolute(h))i=l.join(r,h);else{let u=l.relative(s,e);i=l.join(r,u)}if(b.existsSync(e)){let u=l.dirname(i);b.existsSync(u)||b.mkdirSync(u,{recursive:!0}),b.copyFileSync(e,i),console.log(`Copied ${l.relative(s,e)} to ${l.relative(s,i)}`)}}catch(i){console.error(`Failed to copy asset ${e}`,i)}}catch(d){console.error(`Failed to render ${n}`,d)}}),console.log("SSG Build complete.")}function It(o,t,r){let{distDir:s}=r,S=o.url==="/"?"/index.html":o.url,n=l.join(s,S);if(b.existsSync(n)){let c=l.extname(n),a=b.readFileSync(n),d=c===".html"?"text/html":c===".js"||c===".mjs"?"text/javascript":c===".css"?"text/css":"text/plain";t.writeHead(200,{"Content-Type":d}),t.end(a)}else t.writeHead(404),t.end("Not found")}pt.exports={buildSSG:At,handleSSGServe:It}});var Ht=require("http"),it=require("path"),Dt=Y(),{handleSSR:Lt}=nt(),{buildSSG:Ot,handleSSGServe:Mt}=ft(),L=process.argv.slice(2),mt=L.includes("--build"),Vt=L.includes("--serve"),Ft=L.includes("--b&s"),gt=L.find(o=>o.startsWith("--mode=")),N=gt?gt.split("=")[1]:"csr",St=L.find(o=>o.startsWith("--port=")),K=St?parseInt(St.split("=")[1],10):3e3,xt=L.find(o=>o.startsWith("--src=")),yt=xt?it.resolve(xt.split("=")[1]):process.cwd(),wt=L.find(o=>o.startsWith("--dist=")),$t=wt?it.resolve(wt.split("=")[1]):it.join(process.cwd(),"dist"),qt=process.cwd(),Z={srcDir:yt,distDir:$t,rootDir:qt,port:K,mode:N};console.log(`Mode: ${N}`);console.log(`Source: ${yt}`);console.log(`Dist: ${$t}`);console.log(`Port: ${K}`);(mt||Ft&&N==="ssg")&&(N==="ssg"?(Ot(Z),mt&&process.exit(0)):(console.error("Build is only supported for SSG mode."),process.exit(1)));var Pt=Ht.createServer((o,t)=>{try{N==="csr"?Dt(o,t,Z):N==="ssr"?Lt(o,t,Z):N==="ssg"?Mt(o,t,Z):(t.writeHead(500),t.end(`Unknown mode: ${N}`))}catch(r){console.error("Server Error:",r),t.writeHead(500),t.end("Internal Server Error")}});Pt.listen(K,()=>{console.log(`Server running in ${N.toUpperCase()} mode at http://localhost:${K}`)});
