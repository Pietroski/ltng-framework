<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ltng-framework Test</title>
	<script src="../../ltng-framework.js"></script>
	<script src="theme.js"></script>
	<style>
		body {
			font-family: sans-serif;
			padding: 20px;
		}

		.container {
			border: 1px solid #ccc;
			padding: 20px;
			border-radius: 8px;
		}

		.header {
			background-color: #f0f0f0;
			padding: 10px;
			margin-bottom: 10px;
		}

		.btn {
			padding: 8px 16px;
			background-color: #007bff;
			color: white;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}

		.btn:hover {
			background-color: #0056b3;
		}
	</style>
	<script type="importmap">
		{
			"imports": {
				"ltng-components": "../../pkg/components/index.js"
			}
		}
	</script>
</head>

<body>
	<script type="module">
		import { Div as LTNGDiv, Button as LTNGButton, Footer as LTNGFooter } from "ltng-components";

		Body.render(
			LTNGDiv({ class: 'container' },
				header({ class: 'header' },
					h1({}, 'Welcome to ltng-framework'),
					p({}, 'This is a test of the lightweight framework.')
				),
				main({},
					p({}, 'Below is a generated list:'),
					ul({},
						li({}, 'Item 1'),
						li({}, 'Item 2'),
						li({}, 'Item 3')
					),
					LTNGDiv({ style: 'margin-top: 20px;' },
						LTNGButton({
							class: 'btn',
							onClick: () => overlayModal({}, 'LTNGButton clicked! This is a custom modal.')
						}, 'Click Me')
					)
				),
				footer({ style: 'margin-top: 20px; color: #666;' },
					P({}, 'Â© 2025 ltng-framework')
				)
			)
		)

		// --- State Management Demo ---

		// 1. Counter Store
		const counterStore = createStore({ count: 0 })

		const counterDisplay = span({ style: 'font-weight: bold; margin: 0 10px;' }, '0')

		counterStore.subscribe(state => {
			counterDisplay.textContent = state.count
		})

		const counterSection = LTNGDiv({ class: 'container', style: 'margin-top: 20px;' },
			h3({}, 'State Management: Counter'),
			LTNGDiv({},
				LTNGButton({ onClick: () => counterStore.setState({ count: counterStore.getState().count - 1 }) }, '-'),
				counterDisplay,
				LTNGButton({ onClick: () => counterStore.setState({ count: counterStore.getState().count + 1 }) }, '+')
			)
		)
		Body.render(counterSection)

		// 2. Persisted Theme Store
		const themeStore = createStore({ dark: false }, { persist: 'ltng_theme' })

		const themeBtn = LTNGButton.Primary({ class: 'btn', style: 'margin-top: 10px;' }, 'Toggle Theme')
		themeStore.subscribe(setTheme)

		const themeSection = LTNGDiv({ class: 'container', style: 'margin-top: 20px;' },
			h3({}, 'Persistence: Theme'),
			p({}, 'Reload the page to see the theme persist!'),
			themeBtn,
			LTNGDiv({ style: 'margin-top: 15px;' },
				A({ href: 'page2.html', style: 'color: #007bff;' }, 'Go to Page 2 (Context Test)')
			)
		)

		themeBtn.onclick = () => themeStore.setState({ dark: !themeStore.getState().dark })

		Body.render(themeSection);
	</script>
</body>

</html>
